---
title: "[ë°±ì¤€] 2616. ì†Œí˜•ê¸°ê´€ì°¨"
date: 2021-5-13 13:00:00 +0900
categories:
  - boj
toc: true
classes: wide
---

# ë¬¸ì œ ë§í¬

> [[ë°±ì¤€] 2616. ì†Œí˜•ê¸°ê´€ì°¨](https://www.acmicpc.net/problem/2616)

<br>

# í’€ì´ ê³¼ì •

ë‹¤ì´ë‚˜ë¯¹ í”„ë¡œê·¸ë˜ë° ë¬¸ì œì…ë‹ˆë‹¤. Top-down ê³¼ Bottom-up ë‘ ë°©ë²•ìœ¼ë¡œ í’€ì—ˆìŠµë‹ˆë‹¤.

<br>

## Top-down

```java
sum = new int[N + 1];
dp = new int[N + 1][3];
```

`sum[i]` ëŠ” **ië²ˆ ìš”ì†Œê¹Œì§€ì˜ ë¶€ë¶„í•©**ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. `dp[i][j]` ëŠ” **jê°œì˜ ê¸°ê´€ì°¨ë¥¼ ì´ìš©í•´ ië²ˆ ê°ì°¨ê¹Œì§€ì§€ ì§„í–‰í–ˆì„ ë•Œ íƒœìš¸ ìˆ˜ ìˆëŠ” ìµœëŒ€ ì†ë‹˜**ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

<br>

```java
for (int i = 1; i <= N; i++) sum[i] = sum[i - 1] + arr[i - 1];
for (int i = 1; i <= N; i++) Arrays.fill(dp[i], -1);
```

**sum** ì€ ië²ˆ ê°ì°¨ê¹Œì§€ì˜ ë¶€ë¶„í•©ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ì „ ê°ì°¨ê¹Œì§€ì˜ ëª¨ë“  ì†ë‹˜ì— í˜„ì¬ ê°ì°¨ì˜ ì†ë‹˜ì„ ë”í•´ ì €ì¥í•´ì¤ë‹ˆë‹¤. **dp** ë°°ì—´ ìš”ì†Œì˜ 0 ê°’ì€ ì†ë‹˜ì„ í•˜ë‚˜ë„ ëª»íƒœìš´ ê²ƒì„ ì˜ë¯¸í•˜ëŠ”ë°ì— ì‚¬ìš©ë˜ë¯€ë¡œ, ë©”ëª¨ì´ì œì´ì…˜ì´ ì•ˆëìŒì„ -1ë¡œ í‘œí˜„ í•´ì¤¬ìŠµë‹ˆë‹¤.

<br>

```java
static int go(int idx, int cnt) {
    if (cnt == 3) return 0;
    if (idx >= N) return 0;
    if (dp[idx][cnt] != -1) return dp[idx][cnt];
    if (idx + K - 1 <= N)
        dp[idx][cnt] = Math.max(go(idx + 1, cnt), sum[idx + K - 1] - sum[idx - 1] + go(idx + K, cnt + 1));

    return dp[idx][cnt];
}
```

`go ë©”ì†Œë“œ` ëŠ” ìµœëŒ€ ê¹Šì´ê¹Œì§€ ì´ë™í•´ íƒœìš¸ ìˆ˜ ìˆëŠ” ìŠ¹ê°ì„ ê³„ì‚°í•œ í›„, dp ë°°ì—´ì— ì €ì¥í•˜ê³  ê·¸ ê°’ì„ ë¦¬í„´í•©ë‹ˆë‹¤.

- **cnt**ê°€ 3ì´ë©´, 3ê°œì˜ ê¸°ê´€ì°¨ë¥¼ ë‹¤ ì‚¬ìš©í•œ ê²ƒì´ë¯€ë¡œ ë” ì´ìƒ ìŠ¹ê°ì„ íƒœìš¸ ìˆ˜ ì—†ê¸°ì— 0ì„ ë¦¬í„´í•©ë‹ˆë‹¤.
- **idx**ê°€ N ì´ìƒì´ë©´, ëª¨ë“  ê°ì°¨ì˜ ìˆœíšŒê°€ ëë‚¬ìœ¼ë¯€ë¡œ ìœ„ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ë” ì´ìƒ ìŠ¹ê°ì„ íƒœìš¸ ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤.
- dp ìš”ì†Œ ê°’ì´ **-1ì´ ì•„ë‹ˆë©´**, ê·¸ ê°’ì„ ê°€ì ¸ë‹¤ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë¦¬í„´í•©ë‹ˆë‹¤.
- dp ìš”ì†Œ ê°’ì´ **-1ì´ë©´**, ê°’ì„ êµ¬í•œ ì ì´ ì—†ê¸° ë•Œë¬¸ì—, ì•„ë˜ ë‘ ê°’ì„ ë¹„êµí•˜ì—¬ í° ê°’ì„ ì €ì¥í›„ ë¦¬í„´í•©ë‹ˆë‹¤.
    - ì´ë²ˆ ì¸ë±ìŠ¤ë¥¼ ì‹œì‘ìœ¼ë¡œ í•˜ëŠ” ê°ì°¨ë“¤ì˜ ìŠ¹ê°ì„ í˜„ì¬ ê¸°ê´€ì°¨ì— **íƒœìš°ì§€ ì•ŠëŠ”** **ê²½ìš°**ì™€,
    - ì´ë²ˆ ì¸ë±ìŠ¤ë¥¼ ì‹œì‘ìœ¼ë¡œ í•˜ëŠ” ê°ì°¨ë“¤ì˜ ìŠ¹ê°ì„ í˜„ì¬ ê¸°ê´€ì°¨ì— **íƒœìš°ëŠ” ê²½ìš°**ë¥¼ ë¹„êµí•´ ë” ë§ì€ ìŠ¹ê°ì„ íƒœìš¸ ìˆ˜ ìˆëŠ” ê²½ìš°ì˜ ê°’ì„ `dp[idx][cnt]` ì— ì €ì¥í•©ë‹ˆë‹¤.

<br>

## Bottom-up

<center><img src="http://dl.dropbox.com/s/ludw4w18nww7xub/%EB%B0%B1%EC%A4%80-2616_%EC%86%8C%ED%98%95%EA%B8%B0%EA%B4%80%EC%B0%A8-1.png"></center>

Top-down ë°©ì‹ì˜ ê²½ìš°, Node.js ë¡œ í’€ì´í•˜ë©´ ìœ„ì™€ ê°™ì´ StackSizeExceeded ë¼ëŠ” ì—ëŸ¬ë¥¼ ë§ˆì£¼í•˜ê²Œ ë©ë‹ˆë‹¤. ì´ëŠ”, ë³€ìˆ˜ì˜ ì €ì¥ ê³µê°„ì„ ë„ë„í•˜ê²Œ ì¡ëŠ” JavaScriptì˜ íŠ¹ì„±ìƒ, í˜¸ì¶œ ìŠ¤íƒì´ ê¹Šì–´ì§€ë©´ ì´ì— ë”°ë¼ ìŠ¤íƒì´ ê³ ê°ˆí•´ë²„ë¦¬ëŠ” í˜„ìƒì´ë¼ê³  í•©ë‹ˆë‹¤.

**ğŸ“•ì°¸ê³ :**  
[https://kscodebase.tistory.com/409](https://kscodebase.tistory.com/409)
{: .notice--warning}

<br>

JSë¡œ í’€ê¸° ìœ„í•´, Bottom-up ë°©ì‹ìœ¼ë¡œë„ ìƒê°í•´ë´¤ìŠµë‹ˆë‹¤.

<br>

```jsx
const sum = Array(N + 1).fill(0);
const dp = Array.from(Array(4), () => Array(N + 1).fill(0));

for (let i = 1; i <= N; i++) sum[i] = sum[i - 1] + arr[i - 1];
```

ëˆ„ì í•©ì„ ì˜ë¯¸í•˜ëŠ” sum ê³¼ ë©”ëª¨ì´ì œì´ì…˜ì„ ìœ„í•œ dp ë¥¼ Top-down ê³¼ ë™ì¼í•˜ê²Œ ì„ ì–¸í•´ì¤ë‹ˆë‹¤.

<br>

```jsx
for (let cnt = 1; cnt <= 3; cnt++) {
    for (let idx = cnt * K; idx <= N; idx++) {
        dp[cnt][idx] = Math.max(dp[cnt][idx - 1], dp[cnt - 1][idx - K] + sum[idx] - sum[idx - K]);
    }
}
```

í˜„ì¬ ì¸ë±ìŠ¤ë¥¼ ì‹œì‘ìœ¼ë¡œ Kê°œì˜ ê°ì°¨ì˜ ìŠ¹ê°ë“¤ì„ íƒœìš°ì§€ ì•ŠëŠ” ê²½ìš°ì™€, íƒœìš°ëŠ” ê²½ìš° ì¤‘ ë” ë§ì€ ì†ë‹˜ì„ íƒœìš¸ ìˆ˜ ìˆëŠ” ê²½ìš°ì˜ ê°’ì„ ì €ì¥í•´ì¤ë‹ˆë‹¤.

<br>

# ì½”ë“œ

## Top-down

```java
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Arrays;

public class Main {
    static int N, K;
    static int[] sum;
    static int[][] dp;

    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        N = stoi(br.readLine());
        int[] arr = Arrays.stream(br.readLine().split(" ")).mapToInt(Integer::parseInt).toArray();
        K = stoi(br.readLine());
        sum = new int[N + 1];
        dp = new int[N + 1][3];

        for (int i = 1; i <= N; i++) sum[i] = sum[i - 1] + arr[i - 1];
        for (int i = 1; i <= N; i++) Arrays.fill(dp[i], -1);

        System.out.println(go(1, 0));
    }

    static int go(int idx, int cnt) {
        if (cnt == 3) return 0;
        if (idx >= N) return 0;
        if (dp[idx][cnt] != -1) return dp[idx][cnt];
        if (idx + K - 1 <= N)
            dp[idx][cnt] = Math.max(go(idx + 1, cnt), sum[idx + K - 1] - sum[idx - 1] + go(idx + K, cnt + 1));

        return dp[idx][cnt];
    }

    static int stoi(String s) {
        return Integer.parseInt(s);
    }
}
```

<br>

## Bottom-up

```jsx
const fs = require("fs");
const stdin = (
    process.platform === "linux"
        ? fs.readFileSync("/dev/stdin")
        : `7
35 40 50 10 30 45 60
2`
)
    .toString()
    .trim()
    .split("\n");
const input = (() => {
    let line = 0;
    return () => stdin[line++];
})();

const N = +input();
const arr = input().split(" ").map(Number);
const K = +input();
const sum = Array(N + 1).fill(0);
const dp = Array.from(Array(4), () => Array(N + 1).fill(0));

for (let i = 1; i <= N; i++) sum[i] = sum[i - 1] + arr[i - 1];

for (let cnt = 1; cnt <= 3; cnt++) {
    for (let idx = cnt * K; idx <= N; idx++) {
        dp[cnt][idx] = Math.max(dp[cnt][idx - 1], dp[cnt - 1][idx - K] + sum[idx] - sum[idx - K]);
    }
}

console.log(dp[3][N]);
```